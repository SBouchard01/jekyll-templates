{% assign loop_on = include.loop_on | default: paginator.posts %}

<div class="columns is-centered">
    <div class="column is-four-fifths">

        {% for post in loop_on %}
        <div class="columns">
            <div class="column">
                {% assign url = post.url | remove_first: "/" %}
                <a href="{{ url }}" class="underlined_on_hover">
                    <p class="title is-4">{{ post.title }}</p>
                </a>
                <p class="subtitle is-7">{{ post.date | date_to_string }}{% if post.author %} - {{ post.author }}{% endif %}</p>
            </div>
            <div class="column is-narrow">
                {% if post.lang %}
                <img src="assets/img/lang/{{ post.lang }}.png" style="width: 30px;">
                {% endif %}
            </div>
        </div>

        <p class="content">
            <!-- Detect HTML in excerpt -->
            {% if post.excerpt contains '<' and post.excerpt contains '>' %}
                <!-- Mostly for translated posts, the first language in site.data.language (here english) should be displayed -->
                {{ post.excerpt | split: '</p>' | first | strip_html  }}
            {% else %}
                {{ post.excerpt }}
            {% endif %}
        </p>

        {% if post.categories.size > 0 %}
        {% if post.categories[0] != post.lang or post.categories.size > 1 %}
        <div class="tags">
            <span class="is-size-7" data-i18n="Tags:">Tags: </span>
            {% for tag in post.categories %}
                {% unless tag == post.lang %}
                    {% assign slug_tag = tag | slugify %}
                    {% assign href = post.url | remove_first: '/' | split: '/' | first | append: '/' | append: slug_tag %}
                    <a class="tag is-hoverable is-link" href="{{ href }}" data-i18n="{{ tag }}">{{ tag }}</a>
                {% endunless %}
            {% endfor %}
        </div>
        {% endif %}
        {% endif %}

        {% if forloop.index < forloop.length %}<hr>{% endif %}

        {% endfor %}
    </div>
</div>